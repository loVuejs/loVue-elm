(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-msite"],{"02f4":function(t,e,s){var i=s("4588"),a=s("be13");t.exports=function(t){return function(e,s){var n,r,o=String(a(e)),l=i(s),c=o.length;return l<0||l>=c?t?"":void 0:(n=o.charCodeAt(l),n<55296||n>56319||l+1===c||(r=o.charCodeAt(l+1))<56320||r>57343?t?o.charAt(l):n:t?o.slice(l,l+2):r-56320+(n-55296<<10)+65536)}}},"0390":function(t,e,s){"use strict";var i=s("02f4")(!0);t.exports=function(t,e,s){return e+(s?i(t,e).length:1)}},"0bfb":function(t,e,s){"use strict";var i=s("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"1c7a":function(t,e,s){},"214f":function(t,e,s){"use strict";s("b0c5");var i=s("2aba"),a=s("32e9"),n=s("79e5"),r=s("be13"),o=s("2b4c"),l=s("520a"),c=o("species"),u=!n(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var s="ab".split(t);return 2===s.length&&"a"===s[0]&&"b"===s[1]}();t.exports=function(t,e,s){var h=o(t),p=!n(function(){var e={};return e[h]=function(){return 7},7!=""[t](e)}),g=p?!n(function(){var e=!1,s=/a/;return s.exec=function(){return e=!0,null},"split"===t&&(s.constructor={},s.constructor[c]=function(){return s}),s[h](""),!e}):void 0;if(!p||!g||"replace"===t&&!u||"split"===t&&!d){var f=/./[h],v=s(r,h,""[t],function(t,e,s,i,a){return e.exec===l?p&&!a?{done:!0,value:f.call(e,s,i)}:{done:!0,value:t.call(s,e,i)}:{done:!1}}),m=v[0],x=v[1];i(String.prototype,t,m),a(RegExp.prototype,h,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}}},"23c6":function(t,e,s){var i=s("2d95"),a=s("2b4c")("toStringTag"),n="Arguments"==i(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(s){}};t.exports=function(t){var e,s,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=r(e=Object(t),a))?s:n?i(e):"Object"==(o=i(e))&&"function"==typeof e.callee?"Arguments":o}},"28a5":function(t,e,s){"use strict";var i=s("aae3"),a=s("cb7c"),n=s("ebd6"),r=s("0390"),o=s("9def"),l=s("5f1b"),c=s("520a"),u=Math.min,d=[].push,h="split",p="length",g="lastIndex",f=!!function(){try{return new RegExp("x","y")}catch(t){}}();s("214f")("split",2,function(t,e,s,v){var m;return m="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!i(t))return s.call(a,t,e);var n,r,o,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,f=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,u+"g");while(n=c.call(v,a)){if(r=v[g],r>h&&(l.push(a.slice(h,n.index)),n[p]>1&&n.index<a[p]&&d.apply(l,n.slice(1)),o=n[0][p],h=r,l[p]>=f))break;v[g]===n.index&&v[g]++}return h===a[p]?!o&&v.test("")||l.push(""):l.push(a.slice(h)),l[p]>f?l.slice(0,f):l}:"0"[h](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:s.call(this,t,e)}:s,[function(s,i){var a=t(this),n=void 0==s?void 0:s[e];return void 0!==n?n.call(s,a,i):m.call(String(a),s,i)},function(t,e){var i=v(m,t,this,e,m!==s);if(i.done)return i.value;var c=a(t),d=String(this),h=n(c,RegExp),p=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(f?"y":"g"),x=new h(f?c:"^(?:"+c.source+")",g),y=void 0===e?4294967295:e>>>0;if(0===y)return[];if(0===d.length)return null===l(x,d)?[d]:[];var _=0,b=0,C=[];while(b<d.length){x.lastIndex=f?b:0;var k,w=l(x,f?d:d.slice(b));if(null===w||(k=u(o(x.lastIndex+(f?0:b)),d.length))===_)b=r(d,b,p);else{if(C.push(d.slice(_,b)),C.length===y)return C;for(var T=1;T<=w.length-1;T++)if(C.push(w[T]),C.length===y)return C;b=_=k}}return C.push(d.slice(_)),C}]})},"44bb":function(t,e,s){"use strict";var i=s("8444"),a=s.n(i);a.a},"520a":function(t,e,s){"use strict";var i=s("0bfb"),a=RegExp.prototype.exec,n=String.prototype.replace,r=a,o="lastIndex",l=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t[o]||0!==e[o]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(r=function(t){var e,s,r,u,d=this;return c&&(s=new RegExp("^"+d.source+"$(?!\\s)",i.call(d))),l&&(e=d[o]),r=a.call(d,t),l&&r&&(d[o]=d.global?r.index+r[0].length:e),c&&r&&r.length>1&&n.call(r[0],s,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(r[u]=void 0)}),r}),t.exports=r},"5c4e":function(t,e,s){"use strict";var i=s("a8ea"),a=s.n(i);a.a},"5f1b":function(t,e,s){"use strict";var i=s("23c6"),a=RegExp.prototype.exec;t.exports=function(t,e){var s=t.exec;if("function"===typeof s){var n=s.call(t,e);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"6f7a":function(t,e,s){},8444:function(t,e,s){},"9dfe":function(t,e,s){"use strict";var i=s("1c7a"),a=s.n(i);a.a},"9f66":function(t,e,s){},"9f76":function(t,e,s){"use strict";var i=s("6f7a"),a=s.n(i);a.a},a481:function(t,e,s){"use strict";var i=s("cb7c"),a=s("4bf8"),n=s("9def"),r=s("4588"),o=s("0390"),l=s("5f1b"),c=Math.max,u=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};s("214f")("replace",2,function(t,e,s,f){return[function(i,a){var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n,a):s.call(String(n),i,a)},function(t,e){var a=f(s,t,this,e);if(a.done)return a.value;var d=i(t),h=String(this),p="function"===typeof e;p||(e=String(e));var m=d.global;if(m){var x=d.unicode;d.lastIndex=0}var y=[];while(1){var _=l(d,h);if(null===_)break;if(y.push(_),!m)break;var b=String(_[0]);""===b&&(d.lastIndex=o(h,n(d.lastIndex),x))}for(var C="",k=0,w=0;w<y.length;w++){_=y[w];for(var T=String(_[0]),I=c(u(r(_.index),h.length),0),E=[],S=1;S<_.length;S++)E.push(g(_[S]));var $=_.groups;if(p){var L=[T].concat(E,I,h);void 0!==$&&L.push($);var R=String(e.apply(void 0,L))}else R=v(T,h,I,E,$,e);I>=k&&(C+=h.slice(k,I)+R,k=I+T.length)}return C+h.slice(k)}];function v(t,e,i,n,r,o){var l=i+t.length,c=n.length,u=p;return void 0!==r&&(r=a(r),u=h),s.call(o,u,function(s,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":o=r[a.slice(1,-1)];break;default:var u=+a;if(0===u)return s;if(u>c){var h=d(u/10);return 0===h?s:h<=c?void 0===n[h-1]?a.charAt(1):n[h-1]+a.charAt(1):s}o=n[u-1]}return void 0===o?"":o})}})},a8ea:function(t,e,s){},aae3:function(t,e,s){var i=s("d3f4"),a=s("2d95"),n=s("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==a(t))}},b0c5:function(t,e,s){"use strict";var i=s("520a");s("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},be73:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-box"},[s("mt-header",{attrs:{fixed:"",title:t.addressInfo.name}},[s("div",{attrs:{slot:"left"},slot:"left"},[s("i",{staticClass:"iconfont icon-search"})]),s("router-link",{attrs:{slot:"right",to:"/login"},slot:"right"},[s("mt-button",[t._v("登录 | 注册")])],1)],1),s("div",{staticClass:"food-type-list",attrs:{id:"foodTypeList"}},[s("mt-swipe",{attrs:{auto:0}},[s("mt-swipe-item",[t.foodTypes.length?[s("div",{staticClass:"food-type-slid"},t._l(t.foodTypes,function(e,i){return i<8?s("router-link",{key:e.id,staticClass:"food-type-item",attrs:{to:{path:"/food",query:{geohash:t.addressInfo.geohash,title:e.title,restaurant_category_id:t.getCategoryId(e.link)}}}},[e.image_url?s("img",{directives:[{name:"lazy",rawName:"v-lazy.foodTypeList",value:"https://fuss10.elemecdn.com/"+e.image_url,expression:"'https://fuss10.elemecdn.com/' + foodItem.image_url",modifiers:{foodTypeList:!0}}],staticClass:"food-type-img"}):t._e(),s("div",{staticClass:"food-type-title"},[t._v(t._s(e.title))])]):t._e()}),1)]:[s("msite-types-empty")]],2),s("mt-swipe-item",[t.foodTypes.length?[s("div",{staticClass:"food-type-slid"},t._l(t.foodTypes,function(e,i){return i>=8?s("router-link",{key:e.id,staticClass:"food-type-item",attrs:{to:{path:"/food",query:{geohash:t.addressInfo.geohash,title:e.title,restaurant_category_id:t.getCategoryId(e.link)}}}},[e.image_url?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://fuss10.elemecdn.com/"+e.image_url,expression:"'https://fuss10.elemecdn.com/' + foodItem.image_url"}],staticClass:"food-type-img"}):t._e(),s("div",{staticClass:"food-type-title"},[t._v(t._s(e.title))])]):t._e()}),1)]:[s("msite-types-empty")]],2)],1)],1),s("div",{staticClass:"list-wrapper"},[t._m(0),s("storeList",{attrs:{storeList:t.storeList,geohash:t.geohash,num:10}})],1),t.layerMsgFlag?s("layerMsg",{attrs:{text:t.layerMsgText},on:{close:function(e){t.layerMsgFlag=!1}}}):t._e(),t.loadingType?s("loading"):t._e()],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-head"},[s("div",{staticClass:"item"},[s("i",{staticClass:"iconfont icon-store"}),s("span",[t._v("附近商家：")])])])}],n=(s("ac6a"),s("28a5"),s("a481"),s("5dfb")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"layer-box"},[s("div",{staticClass:"layer-wrapper"},[s("div",{staticClass:"layer-img",style:{backgroundPositionY:-t.positionY%7*58+"px"}}),s("div",{staticClass:"layer-ellipse"})])])])},o=[],l={name:"loading",data(){return{positionY:0,time:null}},mounted(){this.time=setInterval(()=>{this.positionY++},600)},beforeDestroy(){clearInterval(this.time)}},c=l,u=(s("d755"),s("2877")),d=Object(u["a"])(c,r,o,!1,null,"215a611a",null);d.options.__file="loading.vue";var h=d.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-body",attrs:{id:"listBody"}},[t.storeList.length?t._l(t.storeList,function(e){return s("router-link",{key:e.id,staticClass:"item clearfix",attrs:{to:{path:"shop",query:{geohash:t.geohash,id:e.id}}}},[s("div",{staticClass:"fl img-box"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy.listBody",value:t.imgBaseUrl+e.image_path,expression:"imgBaseUrl + item.image_path",modifiers:{listBody:!0}}]})]),s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-first-item"},[s("div",{staticClass:"head-icon"},[t._v("品牌")]),s("h4",{staticClass:"head-title ellipsis"},[t._v(t._s(e.name))]),s("ul",{staticClass:"head-right"},t._l(e.supports,function(e){return s("li",{key:e.id,staticClass:"head-right-item"},[t._v(t._s(e.icon_name))])}),0)]),s("div",{staticClass:"info-second-item clearfix"},[s("div",{staticClass:"fl",staticStyle:{"margin-top":"2px"}},[s("stars",{attrs:{length:5,value:e.rating,size:12}}),s("span",{staticClass:"sales-volume"},[t._v("月售"+t._s(e.recent_order_num)+"单")])],1),s("div",{staticClass:"fr"},[e.delivery_mode?s("div",{staticClass:"hummingbird"},[t._v(t._s(e.delivery_mode.text))]):t._e(),t.zhunshi(e.supports)?s("div",{staticClass:"on-time"},[t._v("准时达")]):t._e()])]),s("div",{staticClass:"info-three-item clearfix"},[s("div",{staticClass:"fl"},[t._v("¥"+t._s(e.float_minimum_order_amount)+"起送"),s("span",{staticClass:"segmentation"},[t._v("/")]),t._v(t._s(e.piecewise_agent_fee.tips))]),s("div",{staticClass:"fr"},[Number(e.distance)?s("span",[t._v(t._s(e.distance>1e3?(e.distance/1e3).toFixed(2)+"km":e.distance+"m"))]):s("span",[t._v(t._s(e.distance))]),s("span",{staticClass:"segmentation"},[t._v("/")]),s("span",{staticClass:"blue"},[t._v(t._s(e.order_lead_time))])])])])])}):t._l(t.num,function(t,e){return s("div",{key:e,staticClass:"item item-bg"})})],2)},g=[],f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stars-box"},[t._l(t.length,function(e,i){return s("div",{key:i,staticClass:"stars-item",on:{click:function(e){return t.clickIndex(i)}}},[s("i",{staticClass:"iconfont",class:t.getClass(i),style:{"font-size":t.size+"px",color:t.color}})])}),t.showNumber?s("div",{staticClass:"stars-number",style:{"font-size":t.size+"px",color:t.color}},[t._v(t._s(t.value))]):t._e()],2)},v=[],m={name:"stars",props:{length:{type:Number,default:5},value:{type:Number,default:0},size:{type:Number,default:14},color:{type:String,default:"#ff9a0d"},showNumber:{type:Boolean,default:!0}},methods:{getInt(){return parseInt(this.value)},getIndex(){return Math.round(100*this.value-100*parseInt(this.value))/10},getClass(t){return t<this.getInt()?"icon-stars-10":t===this.getInt()?"icon-stars-"+this.getIndex():"icon-stars-0"},clickIndex(t){this.$emit("click-index",t+1)}}},x=m,y=(s("44bb"),Object(u["a"])(x,f,v,!1,null,"66b0d297",null));y.options.__file="stars.vue";var _=y.exports,b={props:{storeList:{type:Array},geohash:{type:String},num:{type:Number}},data(){return{imgBaseUrl:"https://elm.cangdu.org/img/"}},components:{stars:_},methods:{zhunshi(t){let e;return t instanceof Array&&t.length?t.forEach(t=>{"准"===t.icon_name&&(e=!0)}):e=!1,e}}},C=b,k=Object(u["a"])(C,p,g,!1,null,null,null);k.options.__file="storeList.vue";var w=k.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"skeleton-box"},[s("div",{staticClass:"skeleton-bac-animation"}),t._l(2,function(e){return s("div",{key:e,staticClass:"skeleton-row",staticStyle:{"margin-bottom":"10px"}},t._l(4,function(t){return s("div",{key:t,staticClass:"skeleton-item"},[s("skeleton-circle",{attrs:{diameter:"45px",margin:"0 auto 6px"}}),s("skeleton-rect",{attrs:{width:"60px",height:"16px",margin:"0 auto 0"}})],1)}),0)})],2)},I=[],E={name:"ranking-list-empty",computed:{getRouteIsAgent(){return"agentRankingList"===this.$route.name}}},S=E,$=(s("9f76"),Object(u["a"])(S,T,I,!1,null,"cb3a9144",null));$.options.__file="msiteTypesEmpty.vue";var L=$.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"skeleton-box"},[s("div",{staticClass:"skeleton-bac-animation"}),s("div",{staticClass:"skeleton-item"},[s("div",{staticClass:"skeleton-item-body skeleton-row",staticStyle:{"margin-bottom":"10px"}},[s("skeleton-rect",{attrs:{width:"30px",height:"18px",margin:"0 12px 0 0",opacity:"0"}}),s("skeleton-circle",{attrs:{diameter:"45px",margin:"0 12px 0 0"}}),s("div",{staticClass:"skeleton-info"},[s("skeleton-rect",{attrs:{width:"60%",height:"20px"}}),s("skeleton-rect",{attrs:{width:"40%",height:"15px",margin:"6px 0 0 0"}})],1),s("skeleton-rect",{attrs:{width:"40px",height:"20px",margin:"0 12px 0 12px"}}),s("div",{staticStyle:{width:"35px"}},[s("skeleton-rect",{attrs:{height:"20px"}}),s("skeleton-rect",{attrs:{height:"15px",margin:"6px 0 0 0"}})],1)],1)]),t._l(15,function(t){return s("div",{key:t,staticClass:"skeleton-item"},[s("div",{staticClass:"skeleton-item-body skeleton-row border-bottom"},[s("skeleton-rect",{attrs:{width:"30px",height:"18px",margin:"0 12px 0 0"}}),s("skeleton-circle",{attrs:{diameter:"45px",margin:"0 12px 0 0"}}),s("div",{staticClass:"skeleton-info"},[s("skeleton-rect",{attrs:{width:"60%",height:"20px"}})],1),s("skeleton-rect",{attrs:{width:"40px",height:"20px",margin:"0 12px 0 12px"}}),s("div",{staticStyle:{width:"35px"}},[s("skeleton-rect",{attrs:{height:"20px"}}),s("skeleton-rect",{attrs:{height:"15px",margin:"6px 0 0 0"}})],1)],1)])})],2)},M=[],z={name:"share-list-empty"},O=z,N=(s("5c4e"),Object(u["a"])(O,R,M,!1,null,"6e393ab4",null));N.options.__file="msiteListEmpty.vue";var q=N.exports,A={data(){return{title:"",addressInfo:{},foodTypes:[],loadingType:!0,layerMsgFlag:!1,layerMsgText:"",storeList:[],geohash:"",axiosCancel:[]}},components:{layerMsg:n["a"],loading:h,storeList:w,msiteTypesEmpty:L,msiteListEmpty:q},mounted(){this.$route.query.geohash?(this.geohash=this.$route.query.geohash,this.getGeohash()):this.getGuessCity(),this.getFoodTypes()},watch:{title:function(t){document.querySelector("title").innerText=t}},methods:{getGeohash(){let t=this,e=axios.CancelToken;axios.get("https://elm.cangdu.org/v2/pois/"+t.$route.query.geohash,{cancelToken:new e(function(e){t.axiosCancel.push(e)})}).then(t=>{200===t.status&&"OK"===t.statusText&&(this.addressInfo=t.data,this.title=t.data.name,this.getStoreList())}).catch(t=>{axios.isCancel(t)&&console.log("Rquest canceled",t.message)})},getGuessCity(){var t=this,e=axios.CancelToken;axios.get("https://elm.cangdu.org/v1/cities",{params:{type:"guess"},cancelToken:new e(function(e){t.axiosCancel.push(e)})}).then(t=>{200===t.status&&"OK"===t.statusText?(this.addressInfo=t.data,this.title=t.data.name,this.geohash=t.data.latitude+","+longitude,this.getStoreList()):(this.layerMsgFlag=!0,this.layerMsgText="定位失败")}).catch(t=>{axios.isCancel(t)&&console.log("Rquest canceled",t.message)})},getFoodTypes(){var t=this,e=axios.CancelToken;axios.get("https://elm.cangdu.org/v2/index_entry",{cancelToken:new e(function(e){t.axiosCancel.push(e)})}).then(t=>{200===t.status&&"OK"===t.statusText?this.foodTypes=t.data:(this.layerMsgFlag=!0,this.layerMsgText="食品分类获取失败，请刷新页面重试")}).catch(t=>{axios.isCancel(t)&&console.log("Rquest canceled",t.message)})},getStoreList(){let t=this,e=axios.CancelToken;axios.get("https://elm.cangdu.org/shopping/restaurants",{params:{latitude:t.addressInfo.latitude,longitude:t.addressInfo.longitude},cancelToken:new e(function(e){t.axiosCancel.push(e)})}).then(t=>{200===t.status&&"OK"===t.statusText?(this.loadingType=!1,this.storeList=t.data):(this.loadingType=!1,this.layerMsgFlag=!0,this.layerMsgText="加载失败，请刷新页面")}).catch(t=>{axios.isCancel(t)&&console.log("Rquest canceled",t.message)})},getCategoryId(t){let e=decodeURIComponent(t.split("=")[1].replace("&target_name",""));return/restaurant_category_id/gi.test(e)?JSON.parse(e).restaurant_category_id.id:""}},destroyed(){this.axiosCancel.forEach(t=>{t()})}},j=A,F=(s("9dfe"),Object(u["a"])(j,i,a,!1,null,"446ee9cc",null));F.options.__file="msite.vue";e["default"]=F.exports},d755:function(t,e,s){"use strict";var i=s("9f66"),a=s.n(i);a.a},ebd6:function(t,e,s){var i=s("cb7c"),a=s("d8e8"),n=s("2b4c")("species");t.exports=function(t,e){var s,r=i(t).constructor;return void 0===r||void 0==(s=i(r)[n])?e:a(s)}}}]);
//# sourceMappingURL=group-msite.16aeb183.js.map