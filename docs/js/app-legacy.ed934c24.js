(function(t){function e(e){for(var i,o,c=e[0],r=e[1],l=e[2],d=0,m=[];d<c.length;d++)o=c[d],a[o]&&m.push(a[o][0]),a[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,c=1;c<s.length;c++){var r=s[c];0!==a[r]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},a={app:0},n=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/loVue-elm/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"045a":function(t,e,s){},"0f59":function(t,e,s){},"10c9":function(t,e,s){"use strict";var i=s("045a"),a=s.n(i);a.a},"1ac6":function(t,e,s){},"32e1":function(t,e,s){"use strict";var i=s("a08a"),a=s.n(i);a.a},"341f":function(t,e,s){"use strict";var i=s("92a0"),a=s.n(i);a.a},"385e":function(t,e,s){"use strict";var i=s("e782"),a=s.n(i);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("ac6a"),s("cadf"),s("551c"),s("097d");var i=s("2b0e"),a=(s("fbb7"),s("d847")),n=s.n(a),o=s("795b"),c=s.n(o),r=s("bc3a"),l=s.n(r),u={},d=l.a.create(u);d.interceptors.request.use(function(t){return t},function(t){return c.a.reject(t)}),d.interceptors.response.use(function(t){return t},function(t){return c.a.reject(t)}),Plugin.install=function(t,e){t.axios=d,window.axios=d,n()(t.prototype,{axios:{get:function(){return d}},$axios:{get:function(){return d}}})},i["default"].use(Plugin);Plugin;var m=s("283e"),f=s.n(m),g=s("76a0"),p=s.n(g),h=(s("aa35"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)}),v=[],y=s("2877"),I={},C=Object(y["a"])(I,h,v,!1,null,null,null);C.options.__file="App.vue";var b=C.exports,x=s("8c4f"),_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-box text-left"},[s("mt-header",{attrs:{fixed:""}},[s("div",{attrs:{slot:"left"},on:{click:t.reload},slot:"left"},[s("mt-button",[t._v("ele.me")])],1),s("router-link",{attrs:{slot:"right",to:"/login"},slot:"right"},[s("mt-button",[t._v("登录 | 注册")])],1)],1),s("div",{staticClass:"section"},[t._m(0),s("mt-cell",{staticClass:"border-bottom",attrs:{title:t.guessCity,to:"/city/"+t.guessCityid,"is-link":""}})],1),t.hotCity.length>0?s("div",{staticClass:"city-container margin-bottom"},[s("h3",[t._v("热门城市：")]),s("ul",{staticClass:"city-box"},t._l(t.hotCity,function(e){return s("router-link",{key:e.id,attrs:{tag:"li",to:"/city/"+e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}),1)]):t._e(),s("mt-cell",{staticClass:"border-top-bottom",attrs:{title:"所有城市",to:"./all-city","is-link":""}}),t.layerMsgFlag?s("layerMsg",{attrs:{text:t.layerMsgText},on:{close:function(e){t.layerMsgFlag=!1}}}):t._e()],1)},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cell-box border-bottom"},[s("div",{staticClass:"cell-item-left"},[s("span",{staticClass:"cell-item-text"},[t._v("当前定位城市：")])]),s("div",{staticClass:"cell-item-right"},[s("span",{staticClass:"cell-item-sub-text"},[t._v("定位不准时，请在城市列表中选择")])])])}],T=(s("7f7f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"layer-box"},[s("div",{staticClass:"layer-content"},[s("div",{staticClass:"layer-text"},[t._v(t._s(t.text))])])])])}),k=[],j=(s("c5f6"),{props:{text:{type:String,required:!0},time:{type:Number,default:1500}},data:function(){return{timeout:""}},mounted:function(){var t=this;this.timeout=setTimeout(function(){t.$emit("close")},this.time)},beforeDestroy:function(){this.timeout&&clearTimeout(this.timeout)}}),M=j,S=(s("32e1"),Object(y["a"])(M,T,k,!1,null,"00fdeee6",null));S.options.__file="layerMsg.vue";var P=S.exports,z=l.a.CancelToken,O={data:function(){return{guessCity:"",guessCityid:"",hotCity:[],layerMsgText:"",layerMsgFlag:!1}},mounted:function(){document.querySelector("title").innerText="首页",this.getGuessCity(),this.getHotCity()},components:{layerMsg:P},methods:{getGuessCity:function(){var t=this,e=this;l.a.get("https://elm.cangdu.org/v1/cities",{params:{type:"guess"},cancelToken:new z(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?(t.guessCity=e.data.name,t.guessCityid=e.data.id):(t.layerMsgText="定位失败，请在城市列表中选择",t.layerMsgFlag=!0)}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getHotCity:function(){var t=this,e=this;g["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),l.a.get("https://elm.cangdu.org/v1/cities",{params:{type:"hot"},cancelToken:new z(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){g["Indicator"].close(),200===e.status&&"OK"===e.statusText&&(t.hotCity=e.data)}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},reload:function(){location.reload()}}},N=O,A=(s("341f"),Object(y["a"])(N,_,w,!1,null,null,null));A.options.__file="home.vue";var G=A.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-left border-0"},[s("mt-header",{attrs:{title:"所有城市（按拼音排序）"}},[s("div",{attrs:{slot:"left"},on:{click:t.back},slot:"left"},[s("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)]),s("mt-index-list",t._l(t.sortGroupCity,function(e,i){return s("mt-index-section",{key:i,attrs:{index:i}},t._l(e,function(t){return s("mt-cell",{key:t.id,attrs:{title:t.name,to:"./city/"+t.id,"is-link":""}})}),1)}),1)],1)},H=[],$=l.a.CancelToken,B={data:function(){return{groupCity:{}}},mounted:function(){document.querySelector("title").innerText="所有城市",this.getGroupCity()},components:{IndexList:g["IndexList"],IndexSection:g["IndexSection"]},methods:{back:function(){document.referrer?this.$router.go(-1):this.$router.push({path:"/"})},getGroupCity:function(){var t=this,e=this;g["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),l.a.get("https://elm.cangdu.org/v1/cities",{params:{type:"group"},cancelToken:new $(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){g["Indicator"].close(),200===e.status&&"OK"===e.statusText&&(t.groupCity=e.data)}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})}},computed:{sortGroupCity:function(){for(var t={},e=65;e<=90;e++){var s=String.fromCharCode(e);this.groupCity[s]&&(t[s]=this.groupCity[s])}return t}}},D=B,J=(s("ef98"),Object(y["a"])(D,Z,H,!1,null,"30370cb1",null));J.options.__file="allCity.vue";var L=J.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-box"},[s("mt-header",{attrs:{fixed:"",title:"密码登录"}},[s("div",{attrs:{slot:"left"},on:{click:t.back},slot:"left"},[s("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)]),s("form",{staticClass:"login-form"},[s("div",{staticClass:"cell-box border-bottom bg-fff"},[s("div",{staticClass:"cell-item-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-input",attrs:{type:"text",placeholder:"账号"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})])]),s("div",{staticClass:"cell-box border-bottom bg-fff"},[s("div",{staticClass:"cell-item-left"},["checkbox"===(t.passwordType?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(e){var s=t.password,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&(t.password=s.concat([n])):o>-1&&(t.password=s.slice(0,o).concat(s.slice(o+1)))}else t.password=a}}}):"radio"===(t.passwordType?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(e){t.password=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:t.passwordType?"text":"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("div",{staticClass:"cell-item-right"},[s("mt-switch",{model:{value:t.passwordType,callback:function(e){t.passwordType=e},expression:"passwordType"}})],1)]),s("div",{staticClass:"cell-box bg-fff"},[s("div",{staticClass:"cell-item-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-input",attrs:{type:"text",placeholder:"验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),s("div",{staticClass:"cell-item-right"},[s("div",{staticClass:"code-box"},[s("img",{staticClass:"code-img",attrs:{src:t.codeImg}}),s("div",{staticClass:"code-btn-box",on:{click:t.getCodeImg}},[s("div",[t._v("看不清")]),s("div",{staticClass:"blue-color"},[t._v("换一张")])])])])]),t._m(0),s("div",{staticClass:"form-btn-box"},[s("button",{staticClass:"form-btn",attrs:{type:"button"},on:{click:t.login}},[t._v("登录")])]),t._m(1)])],1)},Y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-tips"},[t._v("温馨提示：未注册过的账号，登录时将自动注册。"),s("br"),t._v("注册过的用户可凭账号密码登录。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{padding:"0 15px","text-align":"right"}},[s("span",{staticClass:"change-password-btn"},[t._v("重置密码")])])}],V=l.a.CancelToken,U={data:function(){return{account:"",password:"",passwordType:!1,code:"",codeImg:""}},mounted:function(){document.querySelector("title").innerText="密码登录",this.getCodeImg()},components:{},methods:{back:function(){document.referrer?this.$router.go(-1):this.$router.push({path:"/"})},getCodeImg:function(){var t=this,e=this;l.a.post("https://elm.cangdu.org/v1/captchas",{cancelToken:new V(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?t.codeImg=e.data.code:Object(g["Toast"])({message:"获取验证码失败，请重新获取",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},login:function(){var t=this;if(!this.account)return Object(g["Toast"])({message:"请输入账号",position:"bottom",duration:2e3}),!1;if(!this.password)return Object(g["Toast"])({message:"请输入密码",position:"bottom",duration:2e3}),!1;if(!this.code)return Object(g["Toast"])({message:"请输入验证码",position:"bottom",duration:2e3}),!1;g["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"});var e=this;l.a.post("https://elm.cangdu.org/v2/login",{params:{username:e.account,password:e.password,captcha_code:e.code},cancelToken:new V(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){g["Indicator"].close(),200===e.status&&"OK"===e.statusText?1==e.data.status||0==e.data.status&&("ERROR_CAPTCHA"===e.data.type&&t.getCodeImg(),Object(g["Toast"])({message:e.data.message,position:"bottom",duration:2e3})):Object(g["Toast"])({message:"登录失败，请重新登录",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})}},computed:{}},E=U,F=(s("10c9"),Object(y["a"])(E,R,Y,!1,null,"a198c81a",null));F.options.__file="login.vue";var q=F.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-box"},[s("mt-header",{attrs:{fixed:"",title:t.cityInfo.name}},[s("div",{attrs:{slot:"left"},on:{click:t.back},slot:"left"},[s("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1),s("router-link",{attrs:{slot:"right",to:"/all-city"},slot:"right"},[s("mt-button",[t._v("切换城市")])],1)],1),s("form",{staticClass:"search-box",attrs:{method:"post"},on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"cell-box bg-fff padding-0"},[s("div",{staticClass:"cell-item-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-input",attrs:{type:"search",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.address},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getAddressAround(e):null},input:function(e){e.target.composing||(t.address=e.target.value)}}})]),s("div",{staticClass:"cell-item-right"},[s("button",{staticClass:"inline-btn",attrs:{type:"button"},on:{click:t.getAddressAround}},[t._v("搜索")])])])]),s("div",{staticClass:"list-title-box"},[t.searchHistory.length>0?s("div",{staticClass:"list-title-item",class:{on:0===t.listIndex},on:{click:function(e){t.showSearchList(0)}}},[t._v("搜索历史")]):t._e(),t.addressAround.length>0?s("div",{staticClass:"list-title-item",class:{on:1===t.listIndex},on:{click:function(e){t.showSearchList(1)}}},[t._v("搜索结果")]):t._e()]),t.renderList.length>0?s("div",{staticClass:"address-list"},t._l(t.renderList,function(e,i){return s("div",{key:i,staticClass:"list-item",on:{click:function(s){t.nextpage(i,e.geohash)}}},[s("div",{staticClass:"item-name ellipsis"},[t._v(t._s(e.name))]),s("div",{staticClass:"item-address ellipsis"},[t._v(t._s(e.address))])])}),0):t._e(),t.searchHistory.length>0&&0===t.listIndex?s("div",{staticClass:"clear-search-box"},[s("button",{staticClass:"form-btn",attrs:{type:"button"},on:{click:t.clearSearchHistory}},[t._v("清空搜索历史")])]):t._e()],1)},K=[],X=s("a002"),Q=s.n(X),tt=l.a.CancelToken,et={data:function(){return{renderList:[],cityInfo:{},address:"",addressAround:[],searchHistory:[],listIndex:0}},mounted:function(){document.querySelector("title").innerText="搜索地址",this.getCityInfo(),this.getSearchHistory()},methods:{back:function(){document.referrer?this.$router.go(-1):this.$router.push({path:"/"})},getCityInfo:function(){var t=this,e=this;l.a.get("https://elm.cangdu.org/v1/cities/"+e.$route.params.cityId,{cancelToken:new tt(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?(t.cityInfo=e.data,t.$store.commit("setCityInfo",t.cityInfo),Q.a.setItem("loVue-elm-cityInfo",t.cityInfo).then(function(t){console.log("本地城市信息保存成功")}).catch(function(t){console.log("本地城市信息保存失败")})):Object(g["Toast"])({message:"城市获取失败，请刷新页面",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getAddressAround:function(){var t=this;if(!this.address)return Object(g["Toast"])({message:"请输入地址",position:"bottom",duration:2e3}),!1;var e=this;g["Indicator"].open({text:"搜索中...",spinnerType:"fading-circle"}),l.a.get("https://elm.cangdu.org/v1/pois",{params:{city_id:e.cityInfo.id,keyword:e.address},cancelToken:new tt(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){g["Indicator"].close(),200===e.status&&"OK"===e.statusText?(t.renderList=t.addressAround=e.data,t.listIndex=1):Object(g["Toast"])({message:"搜索地址失败，请重新搜索",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getSearchHistory:function(){var t=this;Q.a.getItem("loVue-elm-searchHistory").then(function(e){t.renderList=t.searchHistory=e||[],t.listIndex=0})},nextpage:function(t,e){var s=this,i=this.renderList[t],a=!1;this.searchHistory.forEach(function(t){t.geohash===i.geohash&&(a=!0)}),!a&&this.searchHistory.push(i),Q.a.setItem("loVue-elm-searchHistory",this.searchHistory).then(function(t){console.log("搜索信息保存成功"),s.$router.push({path:"/msite",query:{geohash:e}})})},showSearchList:function(t){0===t?(this.renderList=this.searchHistory,this.listIndex=0):1===t&&(this.renderList=this.addressAround,this.listIndex=1)},clearSearchHistory:function(){var t=this;Q.a.removeItem("loVue-elm-searchHistory").then(function(){t.renderList=t.searchHistory=[],t.addressAround.length&&(t.renderList=t.addressAround,t.listIndex=1),Object(g["Toast"])({message:"搜索历史已清空",position:"bottom",duration:2e3})})}}},st=et,it=(s("756b"),Object(y["a"])(st,W,K,!1,null,"e5140430",null));it.options.__file="city.vue";var at=it.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-box"},[s("mt-header",{attrs:{fixed:"",title:t.addressInfo.name}},[s("div",{attrs:{slot:"left"},slot:"left"},[s("i",{staticClass:"iconfont icon-search"})]),s("router-link",{attrs:{slot:"right",to:"/login"},slot:"right"},[s("mt-button",[t._v("登录 | 注册")])],1)],1),s("div",{staticClass:"food-type-list"},[t.foodTypes.length?s("mt-swipe",{attrs:{auto:0}},[s("mt-swipe-item",[s("div",{staticClass:"food-type-slid"},t._l(t.foodTypes,function(e,i){return i<8?s("router-link",{key:e.id,staticClass:"food-type-item",attrs:{to:{path:"/food",query:{geohash:t.addressInfo.geohash,title:e.title,restaurant_category_id:t.getCategoryId(e.link)}}}},[e.image_url?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://fuss10.elemecdn.com/"+e.image_url,expression:"'https://fuss10.elemecdn.com/' + foodItem.image_url"}],staticClass:"food-type-img"}):t._e(),s("div",{staticClass:"food-type-title"},[t._v(t._s(e.title))])]):t._e()}),1)]),s("mt-swipe-item",[s("div",{staticClass:"food-type-slid"},t._l(t.foodTypes,function(e,i){return i>=8?s("router-link",{key:e.id,staticClass:"food-type-item",attrs:{to:{path:"/food",query:{geohash:t.addressInfo.geohash,title:e.title,restaurant_category_id:t.getCategoryId(e.link)}}}},[e.image_url?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://fuss10.elemecdn.com/"+e.image_url,expression:"'https://fuss10.elemecdn.com/' + foodItem.image_url"}],staticClass:"food-type-img"}):t._e(),s("div",{staticClass:"food-type-title"},[t._v(t._s(e.title))])]):t._e()}),1)])],1):s("img",{staticClass:"full",attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTA4MCA0OTAiPjxkZWZzPjxwYXRoIGlkPSJiIiBkPSJNMCAwaDEwODB2NDg5SDB6Ii8+PGZpbHRlciBpZD0iYSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgeD0iLTUwJSIgeT0iLTUwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij48ZmVPZmZzZXQgZHk9IjEiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiLz48ZmVDb2xvck1hdHJpeCBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiB2YWx1ZXM9IjAgMCAwIDAgMC45MzMzMzMzMzMgMCAwIDAgMCAwLjkzMzMzMzMzMyAwIDAgMCAwIDAuOTMzMzMzMzMzIDAgMCAwIDEgMCIvPjwvZmlsdGVyPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnPjx1c2UgZmlsbD0iIzAwMCIgZmlsdGVyPSJ1cmwoI2EpIiB4bGluazpocmVmPSIjYiIvPjx1c2UgZmlsbD0iI0ZGRiIgeGxpbms6aHJlZj0iI2IiLz48L2c+PGcgZmlsbD0iI0Y2RjZGNiI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzYgMzYpIj48cGF0aCBkPSJNOSAxMzloMTAwdjM0SDl6Ii8+PGVsbGlwc2UgY3g9IjU5IiBjeT0iNTkiIHJ4PSI1OSIgcnk9IjU5Ii8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0NiAzNikiPjxwYXRoIGQ9Ik05IDEzOWgxMDB2MzRIOXoiLz48ZWxsaXBzZSBjeD0iNTkiIGN5PSI1OSIgcng9IjU5IiByeT0iNTkiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjE2IDM2KSI+PHBhdGggZD0iTTkgMTM5aDEwMHYzNEg5eiIvPjxlbGxpcHNlIGN4PSI1OSIgY3k9IjU5IiByeD0iNTkiIHJ5PSI1OSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4ODYgMzYpIj48cGF0aCBkPSJNOSAxMzloMTAwdjM0SDl6Ii8+PGVsbGlwc2UgY3g9IjU5IiBjeT0iNTkiIHJ4PSI1OSIgcnk9IjU5Ii8+PC9nPjwvZz48ZyBmaWxsPSIjRjZGNkY2Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NiAyNTIpIj48cGF0aCBkPSJNOSAxMzloMTAwdjM0SDl6Ii8+PGVsbGlwc2UgY3g9IjU5IiBjeT0iNTkiIHJ4PSI1OSIgcnk9IjU5Ii8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0NiAyNTIpIj48cGF0aCBkPSJNOSAxMzloMTAwdjM0SDl6Ii8+PGVsbGlwc2UgY3g9IjU5IiBjeT0iNTkiIHJ4PSI1OSIgcnk9IjU5Ii8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYxNiAyNTIpIj48cGF0aCBkPSJNOSAxMzloMTAwdjM0SDl6Ii8+PGVsbGlwc2UgY3g9IjU5IiBjeT0iNTkiIHJ4PSI1OSIgcnk9IjU5Ii8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDg4NiAyNTIpIj48cGF0aCBkPSJNOSAxMzloMTAwdjM0SDl6Ii8+PGVsbGlwc2UgY3g9IjU5IiBjeT0iNTkiIHJ4PSI1OSIgcnk9IjU5Ii8+PC9nPjwvZz48L2c+PC9zdmc+"}})],1),s("div",{staticClass:"list-wrapper"},[t._m(0),s("div",{staticClass:"list-body"},[t.storeList.length?s("div",t._l(t.storeList,function(e){return s("router-link",{key:e.id,staticClass:"item clearfix",attrs:{to:{path:"shop",query:{geohash:t.geohash,id:e.id}}}},[s("div",{staticClass:"fl img-box"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgBaseUrl+e.image_path,expression:"imgBaseUrl + item.image_path"}]})]),s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-first-item"},[s("div",{staticClass:"head-icon"},[t._v("品牌")]),s("h4",{staticClass:"head-title ellipsis"},[t._v(t._s(e.name))]),s("ul",{staticClass:"head-right"},t._l(e.supports,function(e){return s("li",{key:e.id,staticClass:"head-right-item"},[t._v(t._s(e.icon_name))])}),0)]),s("div",{staticClass:"info-second-item clearfix"},[s("div",{staticClass:"fl",staticStyle:{"margin-top":"2px"}},[s("stars",{attrs:{length:5,value:e.rating,size:12}}),s("span",{staticClass:"sales-volume"},[t._v("月售"+t._s(e.recent_order_num)+"单")])],1),s("div",{staticClass:"fr"},[e.delivery_mode?s("div",{staticClass:"hummingbird"},[t._v(t._s(e.delivery_mode.text))]):t._e(),t.zhunshi(e.supports)?s("div",{staticClass:"on-time"},[t._v("准时达")]):t._e()])]),s("div",{staticClass:"info-three-item clearfix"},[s("div",{staticClass:"fl"},[t._v("¥"+t._s(e.float_minimum_order_amount)+"起送"),s("span",{staticClass:"segmentation"},[t._v("/")]),t._v(t._s(e.piecewise_agent_fee.tips))]),s("div",{staticClass:"fr"},[Number(e.distance)?s("span",[t._v(t._s(e.distance>1e3?(e.distance/1e3).toFixed(2)+"km":e.distance+"m"))]):s("span",[t._v(t._s(e.distance))]),s("span",{staticClass:"segmentation"},[t._v("/")]),s("span",{staticClass:"blue"},[t._v(t._s(e.order_lead_time))])])])])])}),1):s("div",t._l(10,function(t,e){return s("div",{key:e,staticClass:"item item-bg"})}),0)])]),t.layerMsgFlag?s("layerMsg",{attrs:{text:t.layerMsgText},on:{close:function(e){t.layerMsgFlag=!1}}}):t._e(),t.loadingType?s("loading"):t._e()],1)},ot=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-head"},[s("div",{staticClass:"item"},[s("i",{staticClass:"iconfont icon-store"}),s("span",[t._v("附近商家")])])])}],ct=(s("28a5"),s("a481"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stars-box"},[t._l(t.length,function(e,i){return s("div",{key:i,staticClass:"stars-item",on:{click:function(e){t.clickIndex(i)}}},[s("i",{staticClass:"iconfont",class:t.getClass(i),style:{"font-size":t.size+"px",color:t.color}})])}),t.showNumber?s("div",{staticClass:"stars-number",style:{"font-size":t.size+"px",color:t.color}},[t._v(t._s(t.value))]):t._e()],2)}),rt=[],lt=s("e814"),ut=s.n(lt),dt={name:"stars",props:{length:{type:Number,default:5},value:{type:Number,default:0},size:{type:Number,default:14},color:{type:String,default:"#ff9a0d"},showNumber:{type:Boolean,default:!0}},methods:{getInt:function(){return ut()(this.value)},getIndex:function(){return Math.round(100*this.value-100*ut()(this.value))/10},getClass:function(t){return t<this.getInt()?"icon-stars-10":t===this.getInt()?"icon-stars-"+this.getIndex():"icon-stars-0"},clickIndex:function(t){this.$emit("click-index",t+1)}}},mt=dt,ft=(s("385e"),Object(y["a"])(mt,ct,rt,!1,null,"f5613f9e",null));ft.options.__file="stars.vue";var gt=ft.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"layer-box"},[s("div",{staticClass:"layer-wrapper"},[s("div",{staticClass:"layer-img",style:{backgroundPositionY:-t.positionY%7*58+"px"}}),s("div",{staticClass:"layer-ellipse"})])])])},ht=[],vt={name:"loading",data:function(){return{positionY:0,time:null}},mounted:function(){var t=this;this.time=setInterval(function(){t.positionY++},600)},beforeDestroy:function(){clearInterval(this.time)}},yt=vt,It=(s("d755"),Object(y["a"])(yt,pt,ht,!1,null,"215a611a",null));It.options.__file="loading.vue";var Ct=It.exports,bt=l.a.CancelToken,xt={data:function(){return{title:"",addressInfo:{},foodTypes:[],loadingType:!0,layerMsgFlag:!1,layerMsgText:"",storeList:[],geohash:"",imgBaseUrl:"https://elm.cangdu.org/img/"}},components:{stars:gt,layerMsg:P,loading:Ct},mounted:function(){this.$route.query.geohash?(this.geohash=this.$route.query.geohash,this.getGeohash()):this.getGuessCity(),this.getFoodTypes()},watch:{title:function(t){document.querySelector("title").innerText=t}},methods:{getGeohash:function(){var t=this,e=this;l.a.get("https://elm.cangdu.org/v2/pois/"+e.$route.query.geohash,{cancelToken:new bt(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText&&(t.addressInfo=e.data,t.title=e.data.name,t.getStoreList())}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getGuessCity:function(){var t=this,e=this;l.a.get("https://elm.cangdu.org/v1/cities",{params:{type:"guess"},cancelToken:new bt(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?(t.addressInfo=e.data,t.title=e.data.name,t.geohash=e.data.latitude+","+longitude,t.getStoreList()):(t.layerMsgFlag=!0,t.layerMsgText="定位失败")}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getFoodTypes:function(){var t=this,e=this;l.a.get("https://elm.cangdu.org/v2/index_entry",{cancelToken:new bt(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?t.foodTypes=e.data:(t.layerMsgFlag=!0,t.layerMsgText="食品分类获取失败，请刷新页面重试")}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getStoreList:function(){var t=this,e=this;l.a.get("https://elm.cangdu.org/shopping/restaurants",{params:{latitude:e.addressInfo.latitude,longitude:e.addressInfo.longitude},cancelToken:new bt(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?(t.loadingType=!1,t.storeList=e.data):(t.loadingType=!1,t.layerMsgFlag=!0,t.layerMsgText="加载失败，请刷新页面")}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getCategoryId:function(t){var e=decodeURIComponent(t.split("=")[1].replace("&target_name",""));return/restaurant_category_id/gi.test(e)?JSON.parse(e).restaurant_category_id.id:""},zhunshi:function(t){var e;return t instanceof Array&&t.length?t.forEach(function(t){"准"===t.icon_name&&(e=!0)}):e=!1,e}}},_t=xt,wt=(s("771d"),Object(y["a"])(_t,nt,ot,!1,null,"6a646b06",null));wt.options.__file="msite.vue";var Tt=wt.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v("特色商铺列表页")])},jt=[],Mt={},St=Mt,Pt=Object(y["a"])(St,kt,jt,!1,null,"069c922a",null);Pt.options.__file="food.vue";var zt=Pt.exports;i["default"].use(x["a"]);var Ot=new x["a"]({base:"/loVue-elm/",routes:[{path:"/",name:"home",component:G},{path:"/all-city",name:"allCity",component:L},{path:"/login",name:"login",component:q},{path:"/city/:cityId",name:"city",component:at},{path:"/msite",name:"msite",component:Tt},{path:"/food",name:"food",component:zt}],scrollBehavior:function(t,e,s){return s||{x:0,y:0}}}),Nt=s("2f62");i["default"].use(Nt["a"]);var At=new Nt["a"].Store({state:{cancel:[],cityInfo:{},addressInfo:{}},mutations:{axiosCancel:function(t,e){t.cancel.push(e)},setCityInfo:function(t,e){t.cityInfo=e},setAddressInfo:function(t,e){t.addressInfo=e}},actions:{}}),Gt=(s("0f59"),s("9483"));Object(Gt["a"])("".concat("/loVue-elm/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),i["default"].use(f.a,{loading:"https://raw.githubusercontent.com/loVuejs/loVue-elm/master/src/assets/loading.gif",error:"https://raw.githubusercontent.com/loVuejs/loVue-elm/master/src/assets/error.jpg",attempt:3}),i["default"].use(p.a),i["default"].config.productionTip=!1,Ot.beforeEach(function(t,e,s){At.state.cancel.length>0&&(p.a.Indicator.close(),At.state.cancel.forEach(function(t){t()})),s()}),new i["default"]({router:Ot,store:At,render:function(t){return t(b)}}).$mount("#app")},"756b":function(t,e,s){"use strict";var i=s("d344"),a=s.n(i);a.a},"771d":function(t,e,s){"use strict";var i=s("1ac6"),a=s.n(i);a.a},"92a0":function(t,e,s){},"9f66":function(t,e,s){},a08a:function(t,e,s){},acc9:function(t,e,s){},d344:function(t,e,s){},d755:function(t,e,s){"use strict";var i=s("9f66"),a=s.n(i);a.a},e782:function(t,e,s){},ef98:function(t,e,s){"use strict";var i=s("acc9"),a=s.n(i);a.a},fbb7:function(t,e,s){}});
//# sourceMappingURL=app-legacy.ed934c24.js.map