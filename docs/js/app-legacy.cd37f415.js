(function(t){function e(e){for(var s,i,c=e[0],r=e[1],l=e[2],d=0,p=[];d<c.length;d++)i=c[d],n[i]&&p.push(n[i][0]),n[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],s=!0,c=1;c<o.length;c++){var r=o[c];0!==n[r]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=o[0]))}return t}var s={},n={app:0},a=[];function i(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=s,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(o,s,function(e){return t[e]}.bind(null,s));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/loVue-elm/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"045a":function(t,e,o){},"0460":function(t,e,o){"use strict";var s=o("6aa4"),n=o.n(s);n.a},"10c9":function(t,e,o){"use strict";var s=o("045a"),n=o.n(s);n.a},"341f":function(t,e,o){"use strict";var s=o("92a0"),n=o.n(s);n.a},"56d7":function(t,e,o){"use strict";o.r(e);o("ac6a"),o("cadf"),o("551c"),o("097d");var s=o("2b0e"),n=(o("fbb7"),o("d847")),a=o.n(n),i=o("795b"),c=o.n(i),r=o("bc3a"),l=o.n(r),u={},d=l.a.create(u);d.interceptors.request.use(function(t){return t},function(t){return c.a.reject(t)}),d.interceptors.response.use(function(t){return t},function(t){return c.a.reject(t)}),Plugin.install=function(t,e){t.axios=d,window.axios=d,a()(t.prototype,{axios:{get:function(){return d}},$axios:{get:function(){return d}}})},s["default"].use(Plugin);Plugin;var p=o("76a0"),f=o.n(p),m=(o("aa35"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)}),g=[],v=o("2877"),h={},b=Object(v["a"])(h,m,g,!1,null,null,null);b.options.__file="App.vue";var y=b.exports,C=o("8c4f"),x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-box text-left"},[o("mt-header",{attrs:{fixed:""}},[o("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[o("mt-button",[t._v("ele.me")])],1),o("router-link",{attrs:{slot:"right",to:"/login"},slot:"right"},[o("mt-button",[t._v("登录 | 注册")])],1)],1),o("div",{staticClass:"section"},[t._m(0),o("mt-cell",{staticClass:"border-bottom",attrs:{title:t.guessCity,to:"/city/"+t.guessCityid,"is-link":""}})],1),t.hotCity.length>0?o("div",{staticClass:"city-container margin-bottom"},[o("h3",[t._v("热门城市：")]),o("ul",{staticClass:"city-box"},t._l(t.hotCity,function(e){return o("router-link",{key:e.id,attrs:{tag:"li",to:"/city/"+e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}),1)]):t._e(),o("mt-cell",{staticClass:"border-top-bottom",attrs:{title:"所有城市",to:"./all-city","is-link":""}})],1)},_=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"cell-box border-bottom"},[o("div",{staticClass:"cell-item-left"},[o("span",{staticClass:"cell-item-text"},[t._v("当前定位城市：")])]),o("div",{staticClass:"cell-item-right"},[o("span",{staticClass:"cell-item-sub-text"},[t._v("定位不准时，请在城市列表中选择")])])])}],w=(o("7f7f"),l.a.CancelToken),k={data:function(){return{guessCity:"",guessCityid:"",hotCity:[]}},mounted:function(){document.querySelector("title").innerText="首页",this.getGuessCity(),this.getHotCity()},methods:{getGuessCity:function(){var t=this,e=this;l.a.get("https://elm.cangdu.org/v1/cities",{params:{type:"guess"},cancelToken:new w(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?(t.guessCity=e.data.name,t.guessCityid=e.data.id):Object(p["Toast"])({message:"定位失败，请在城市列表中选择",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getHotCity:function(){var t=this,e=this;p["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),l.a.get("https://elm.cangdu.org/v1/cities",{params:{type:"hot"},cancelToken:new w(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){p["Indicator"].close(),200===e.status&&"OK"===e.statusText&&(t.hotCity=e.data)}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})}}},T=k,I=(o("341f"),Object(v["a"])(T,x,_,!1,null,null,null));I.options.__file="home.vue";var O=I.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"text-left border-0"},[o("mt-header",{attrs:{title:"所有城市（按拼音排序）"}},[o("div",{attrs:{slot:"left"},on:{click:t.back},slot:"left"},[o("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)]),o("mt-index-list",t._l(t.sortGroupCity,function(e,s){return o("mt-index-section",{key:s,attrs:{index:s}},t._l(e,function(t){return o("mt-cell",{key:t.id,attrs:{title:t.name,to:"./city/"+t.id,"is-link":""}})}),1)}),1)],1)},$=[],P=l.a.CancelToken,A={data:function(){return{groupCity:{}}},mounted:function(){document.querySelector("title").innerText="所有城市",this.getGroupCity()},components:{IndexList:p["IndexList"],IndexSection:p["IndexSection"]},methods:{back:function(){document.referrer?this.$router.go(-1):this.$router.push({path:"/"})},getGroupCity:function(){var t=this,e=this;p["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),l.a.get("https://elm.cangdu.org/v1/cities",{params:{type:"group"},cancelToken:new P(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){p["Indicator"].close(),200===e.status&&"OK"===e.statusText&&(t.groupCity=e.data)}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})}},computed:{sortGroupCity:function(){for(var t={},e=65;e<=90;e++){var o=String.fromCharCode(e);this.groupCity[o]&&(t[o]=this.groupCity[o])}return t}}},S=A,q=(o("ef98"),Object(v["a"])(S,j,$,!1,null,"30370cb1",null));q.options.__file="allCity.vue";var E=q.exports,R=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-box"},[o("mt-header",{attrs:{fixed:"",title:"密码登录"}},[o("div",{attrs:{slot:"left"},on:{click:t.back},slot:"left"},[o("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)]),o("form",{staticClass:"login-form"},[o("div",{staticClass:"cell-box border-bottom bg-fff"},[o("div",{staticClass:"cell-item-left"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-input",attrs:{type:"text",placeholder:"账号"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})])]),o("div",{staticClass:"cell-box border-bottom bg-fff"},[o("div",{staticClass:"cell-item-left"},["checkbox"===(t.passwordType?"text":"password")?o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(e){var o=t.password,s=e.target,n=!!s.checked;if(Array.isArray(o)){var a=null,i=t._i(o,a);s.checked?i<0&&(t.password=o.concat([a])):i>-1&&(t.password=o.slice(0,i).concat(o.slice(i+1)))}else t.password=n}}}):"radio"===(t.passwordType?"text":"password")?o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(e){t.password=null}}}):o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-input",attrs:{placeholder:"密码",type:t.passwordType?"text":"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),o("div",{staticClass:"cell-item-right"},[o("mt-switch",{model:{value:t.passwordType,callback:function(e){t.passwordType=e},expression:"passwordType"}})],1)]),o("div",{staticClass:"cell-box bg-fff"},[o("div",{staticClass:"cell-item-left"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-input",attrs:{type:"text",placeholder:"验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),o("div",{staticClass:"cell-item-right"},[o("div",{staticClass:"code-box"},[o("img",{staticClass:"code-img",attrs:{src:t.codeImg}}),o("div",{staticClass:"code-btn-box",on:{click:t.getCodeImg}},[o("div",[t._v("看不清")]),o("div",{staticClass:"blue-color"},[t._v("换一张")])])])])]),t._m(0),o("div",{staticClass:"form-btn-box"},[o("button",{staticClass:"form-btn",attrs:{type:"button"},on:{click:t.login}},[t._v("登录")])]),t._m(1)])],1)},K=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-tips"},[t._v("温馨提示：未注册过的账号，登录时将自动注册。"),o("br"),t._v("注册过的用户可凭账号密码登录。")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{padding:"0 15px","text-align":"right"}},[o("span",{staticClass:"change-password-btn"},[t._v("重置密码")])])}],G=l.a.CancelToken,N={data:function(){return{account:"",password:"",passwordType:!1,code:"",codeImg:""}},mounted:function(){document.querySelector("title").innerText="密码登录",this.getCodeImg()},components:{},methods:{back:function(){document.referrer?this.$router.go(-1):this.$router.push({path:"/"})},getCodeImg:function(){var t=this,e=this;l.a.post("https://elm.cangdu.org/v1/captchas",{cancelToken:new G(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?t.codeImg=e.data.code:Object(p["Toast"])({message:"获取验证码失败，请重新获取",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},login:function(){var t=this;if(!this.account)return Object(p["Toast"])({message:"请输入账号",position:"bottom",duration:2e3}),!1;if(!this.password)return Object(p["Toast"])({message:"请输入密码",position:"bottom",duration:2e3}),!1;if(!this.code)return Object(p["Toast"])({message:"请输入验证码",position:"bottom",duration:2e3}),!1;p["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"});var e=this;l.a.post("https://elm.cangdu.org/v2/login",{params:{username:e.account,password:e.password,captcha_code:e.code},cancelToken:new G(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){p["Indicator"].close(),200===e.status&&"OK"===e.statusText?1==e.data.status||0==e.data.status&&("ERROR_CAPTCHA"===e.data.type&&t.getCodeImg(),Object(p["Toast"])({message:e.data.message,position:"bottom",duration:2e3})):Object(p["Toast"])({message:"登录失败，请重新登录",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})}},computed:{}},M=N,H=(o("10c9"),Object(v["a"])(M,R,K,!1,null,"a198c81a",null));H.options.__file="login.vue";var V=H.exports,J=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-box"},[o("mt-header",{attrs:{fixed:"",title:t.cityInfo.name}},[o("div",{attrs:{slot:"left"},on:{click:t.back},slot:"left"},[o("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1),o("router-link",{attrs:{slot:"right",to:"/all-city"},slot:"right"},[o("mt-button",[t._v("切换城市")])],1)],1),o("form",{staticClass:"search-box",attrs:{method:"post"}},[o("div",{staticClass:"cell-box bg-fff padding-0"},[o("div",{staticClass:"cell-item-left"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-input",attrs:{type:"search",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]),o("div",{staticClass:"cell-item-right"},[o("button",{staticClass:"inline-btn",attrs:{type:"button"},on:{click:t.getAddressAround}},[t._v("搜索")])])])]),t.addressAround.length>0?o("div",{staticClass:"address-list"},t._l(t.addressAround,function(e,s){return o("div",{key:s,staticClass:"list-item"},[o("div",{staticClass:"item-name ellipsis"},[t._v(t._s(e.name))]),o("div",{staticClass:"item-address ellipsis"},[t._v(t._s(e.address))])])}),0):t._e()],1)},L=[],B=o("a002"),z=o.n(B),D=l.a.CancelToken,F={data:function(){return{cityInfo:{},address:"",addressAround:[]}},mounted:function(){document.querySelector("title").innerText="搜索地址",this.getCityInfo()},components:{},methods:{back:function(){document.referrer?this.$router.go(-1):this.$router.push({path:"/"})},getCityInfo:function(){var t=this,e=this;l.a.get("https://elm.cangdu.org/v1/cities/"+e.$route.params.cityId,{cancelToken:new D(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){200===e.status&&"OK"===e.statusText?(t.cityInfo=e.data,t.$store.commit("setCityInfo",t.cityInfo),z.a.setItem("loVue-elm-cityInfo",t.cityInfo).then(function(t){console.log("本地城市信息保存成功")}).catch(function(t){console.log("本地城市信息保存失败")})):Object(p["Toast"])({message:"城市获取失败，请刷新页面",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})},getAddressAround:function(){var t=this;if(!this.address)return Object(p["Toast"])({message:"请输入地址",position:"bottom",duration:2e3}),!1;var e=this;p["Indicator"].open({text:"搜索中...",spinnerType:"fading-circle"}),l.a.get("https://elm.cangdu.org/v1/pois",{params:{city_id:e.cityInfo.id,keyword:e.address},cancelToken:new D(function(t){e.$store.commit("axiosCancel",t)})}).then(function(e){p["Indicator"].close(),200===e.status&&"OK"===e.statusText?t.addressAround=e.data:Object(p["Toast"])({message:"搜索地址失败，请重新搜索",position:"bottom",duration:2e3})}).catch(function(t){console.log(t),l.a.isCancel(t)&&console.log("Rquest canceled",t.message)})}}},Q=F,U=(o("0460"),Object(v["a"])(Q,J,L,!1,null,"07f6bdba",null));U.options.__file="city.vue";var W=U.exports;s["default"].use(C["a"]);var X=new C["a"]({base:"/loVue-elm/",routes:[{path:"/",name:"home",component:O},{path:"/all-city",name:"allCity",component:E},{path:"/login",name:"login",component:V},{path:"/city/:cityId",name:"city",component:W}],scrollBehavior:function(t,e,o){return o||{x:0,y:0}}}),Y=o("2f62");s["default"].use(Y["a"]);var Z=new Y["a"].Store({state:{cancel:[],cityInfo:{}},mutations:{axiosCancel:function(t,e){t.cancel.push(e)},setCityInfo:function(t,e){t.cityInfo=e}},actions:{}});s["default"].use(f.a),s["default"].config.productionTip=!1,X.beforeEach(function(t,e,o){Z.state.cancel.length>0&&(f.a.Indicator.close(),Z.state.cancel.forEach(function(t){t()})),o()}),new s["default"]({router:X,store:Z,render:function(t){return t(y)}}).$mount("#app")},"6aa4":function(t,e,o){},"92a0":function(t,e,o){},acc9:function(t,e,o){},ef98:function(t,e,o){"use strict";var s=o("acc9"),n=o.n(s);n.a},fbb7:function(t,e,o){}});
//# sourceMappingURL=app-legacy.cd37f415.js.map